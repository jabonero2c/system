<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- FIX: Removed default content from the title block to prevent "defined twice" error -->
    <title>{% block title %}SaveABlood{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* Custom Colors (Matching your red/blue/white theme) */
        .bg-primary { background-color: #EF4444; } /* Red-600 */
        .text-primary { color: #EF4444; }
        .border-primary { border-color: #EF4444; }
        .focus\:border-primary:focus { border-color: #EF4444; }
        .focus\:ring-primary:focus { --tw-ring-color: #EF4444; }

        .bg-secondary { background-color: #2563EB; } /* Blue-600 */
        .text-secondary { color: #2563EB; }
        .border-secondary { border-color: #2563EB; }
        .focus\:border-secondary:focus { border-color: #2563EB; }
        .focus\:ring-secondary:focus { --tw-ring-color: #2563EB; }

        .bg-mid-blue { background-color: #3B82F6; } /* Blue-500 */
        .text-mid-blue { color: #3B82F6; }

        .gradient-background {
            background: linear-gradient(to right, #EF4444, #FEE2E2, #DBEAFE, #2563EB); /* Red to Light Red, Light Blue, Blue */
        }
    </style>
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">

    <nav class="bg-primary p-4 text-white shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <a href="{{ url_for('home') }}" class="text-2xl font-bold">SaveABlood</a>
            <div class="space-x-4">
                <a href="{{ url_for('home') }}" class="hover:text-gray-200">Home</a>
                {% if session.user_id %}
                    <a href="{{ url_for('dashboard') }}" class="hover:text-gray-200">Dashboard</a>
                    <a href="{{ url_for('logout') }}" class="bg-red-700 hover:bg-red-800 text-white py-2 px-3 rounded-md transition duration-200">Logout</a>
                {% else %}
                    <a href="{{ url_for('auth_page') }}" class="hover:text-gray-200">Login</a>
                    <a href="{{ url_for('auth_page') }}" class="bg-secondary hover:bg-mid-blue text-white py-2 px-3 rounded-md transition duration-200">Register</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="container mx-auto mt-4 px-4">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages mb-4">
                    {% for category, message in messages %}
                        <div class="p-3 rounded-md {% if category == 'error' %}bg-red-200 text-red-800{% elif category == 'success' %}bg-green-200 text-green-800{% elif category == 'info' %}bg-blue-200 text-blue-800{% elif category == 'warning' %}bg-yellow-200 text-yellow-800{% endif %}">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
    </div>

    <main class="py-6">
        {% block body %}{% endblock %}
    </main>

    <footer class="bg-secondary p-4 text-white text-center mt-8">
        <div class="container mx-auto">
            <p>&copy; 2025 SaveABlood. All Rights Reserved.</p>
            <div class="flex justify-center space-x-4 mt-2">
                <a href="#" class="hover:text-gray-200">About</a>
                <span class="text-gray-400">|</span>
                <a href="#" class="hover:text-gray-200">Contact</a>
                <span class="text-gray-400">|</span>
                <a href="#" class="hover:text-gray-200">Privacy Policy</a>
            </div>
        </div>
    </footer>

</body>
</html>